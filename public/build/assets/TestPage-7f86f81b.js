import{w as Pe,x as Be,r as y,y as Ie,h as ge,j as n,_ as D,l as xe,z as $e,A as He,C as Ve,c as Fe,d as qe,B as ye,s as se,D as H,E as we,e as Xe,m as Ye,a as Ge,u as Ue,F as Ee,G as V,H as Q,M as oe,I as Qe,g as Ke,q as Ze,J as Je}from"./main-ea3bcec7.js";import{u as Se}from"./test-2110aa97.js";import{B as z}from"./Button-dbb12d56.js";import{e as et}from"./extendSxProp-02d77161.js";import{S as A}from"./Skeleton-0472c68a.js";import{P as tt}from"./prism.min-7ec26ca3.js";const it=["className","component"];function st(i={}){const{themeId:e,defaultTheme:s,defaultClassName:t="MuiBox-root",generateClassName:r}=i,o=Pe("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(Be);return y.forwardRef(function(c,h){const u=Ie(s),f=et(c),{className:g,component:p="div"}=f,S=ge(f,it);return n.jsx(o,D({as:p,ref:h,className:xe(g,r?r(t):t),theme:e&&u[e]||u},S))})}const rt=$e(),nt=st({themeId:He,defaultTheme:rt,defaultClassName:"MuiBox-root",generateClassName:Ve.generate}),le=nt;function ot(i){return Fe("MuiCircularProgress",i)}qe("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const lt=["className","color","disableShrink","size","style","thickness","value","variant"];let G=i=>i,ae,ce,he,de;const C=44,at=ye(ae||(ae=G`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),ct=ye(ce||(ce=G`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),ht=i=>{const{classes:e,variant:s,color:t,disableShrink:r}=i,o={root:["root",s,`color${H(t)}`],svg:["svg"],circle:["circle",`circle${H(s)}`,r&&"circleDisableShrink"]};return Ye(o,ot,e)},dt=se("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(i,e)=>{const{ownerState:s}=i;return[e.root,e[s.variant],e[`color${H(s.color)}`]]}})(({ownerState:i,theme:e})=>D({display:"inline-block"},i.variant==="determinate"&&{transition:e.transitions.create("transform")},i.color!=="inherit"&&{color:(e.vars||e).palette[i.color].main}),({ownerState:i})=>i.variant==="indeterminate"&&we(he||(he=G`
      animation: ${0} 1.4s linear infinite;
    `),at)),ut=se("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(i,e)=>e.svg})({display:"block"}),ft=se("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(i,e)=>{const{ownerState:s}=i;return[e.circle,e[`circle${H(s.variant)}`],s.disableShrink&&e.circleDisableShrink]}})(({ownerState:i,theme:e})=>D({stroke:"currentColor"},i.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},i.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:i})=>i.variant==="indeterminate"&&!i.disableShrink&&we(de||(de=G`
      animation: ${0} 1.4s ease-in-out infinite;
    `),ct)),pt=y.forwardRef(function(e,s){const t=Xe({props:e,name:"MuiCircularProgress"}),{className:r,color:o="primary",disableShrink:l=!1,size:a=40,style:c,thickness:h=3.6,value:u=0,variant:f="indeterminate"}=t,g=ge(t,lt),p=D({},t,{color:o,disableShrink:l,size:a,thickness:h,value:u,variant:f}),S=ht(p),x={},w={},E={};if(f==="determinate"){const O=2*Math.PI*((C-h)/2);x.strokeDasharray=O.toFixed(3),E["aria-valuenow"]=Math.round(u),x.strokeDashoffset=`${((100-u)/100*O).toFixed(3)}px`,w.transform="rotate(-90deg)"}return n.jsx(dt,D({className:xe(S.root,r),style:D({width:a,height:a},w,c),ownerState:p,ref:s,role:"progressbar"},E,g,{children:n.jsx(ut,{className:S.svg,ownerState:p,viewBox:`${C/2} ${C/2} ${C} ${C}`,children:n.jsx(ft,{className:S.circle,style:x,ownerState:p,cx:C,cy:C,r:(C-h)/2,fill:"none",strokeWidth:h})})}))}),mt=pt,vt=i=>{const{className:e,test:s,numberOfUnansweredQuestions:t,loadingSubmit:r,setLoadingSubmit:o,answers:l,...a}=i,c=Ge(d=>d.user),{addTestHistory:h}=Se(),u=Ue(),[f,g]=y.useState(!1),p=()=>g(!1),[S,x]=y.useState(!1),w=()=>x(!1),E=()=>{u(-1)},O=async()=>{x(!1),o(!0);const{testHistory:d}=await Qe("/api/submit-test",{method:"post",body:JSON.stringify({code:s.code,answers:l,time:m-b})}).catch(_=>({testHistory:null}));d?(await h(s.code,d),u(`/submit-test/${s.code}/${d.id}`,{replace:!0})):u("/")},m=s.time*60,[b,v]=y.useState(m);return y.useEffect(()=>{const d=setInterval(()=>{b<=0?(clearInterval(d),O()):v(_=>_-1)},1e3);return()=>{clearInterval(d)}},[]),n.jsxs(n.Fragment,{children:[n.jsxs("div",{...a,className:Ee("h-14 border-b flex space-x-4 items-center px-4 text-sm",e),children:[n.jsx("div",{className:"flex-1",children:n.jsx(z,{variant:"contained",size:"small",color:"error",startIcon:n.jsx("span",{className:"icon",children:"power_settings_new"}),onClick:()=>g(!0),children:"Thoát"})}),n.jsxs(V.div,{className:"flex-grow font-semibold text-center",initial:{x:50,opacity:.5},animate:{x:0,opacity:1},transition:{duration:1},children:["Thí sinh: ",c==null?void 0:c.name]}),n.jsxs(V.div,{className:"flex-1 flex items-center justify-end space-x-4",initial:{x:50,opacity:.5},animate:{x:0,opacity:1},transition:{duration:1},children:[n.jsxs("p",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"icon",children:"timer"}),n.jsx("span",{children:Q(b)})]}),n.jsx(z,{variant:"contained",size:"small",startIcon:n.jsx("span",{className:"icon",children:"send"}),onClick:()=>x(!0),children:"Nộp bài"})]})]}),n.jsx(oe,{open:f,onClose:p,children:n.jsxs(le,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 shadow rounded w-96 bg-white",children:[n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"icon !text-3xl text-red-600",children:"warning"}),n.jsx("span",{className:"font-semibold",children:"Bạn có chắc chắn muốn thoát?"})]}),n.jsxs("p",{className:"py-3 text-sm",children:["Thời gian làm bài còn lại của bạn còn : ",n.jsx("span",{className:"font-semibold",children:Q(b)})]}),n.jsx("p",{className:"text-gray-600 text-sm",children:"Khi bạn xác nhận thoát bài thi, bạn sẽ không thể tiếp tục làm bài ở lần thi này. Kết quả làm bài của bạn từ lúc bắt đầu vẫn sẽ được nộp lên. "})]}),n.jsxs("div",{className:"border-t p-4 flex justify-end space-x-4",children:[n.jsx(z,{color:"inherit",onClick:p,children:"Hủy"}),n.jsx(z,{variant:"contained",onClick:E,children:"Xác nhận"})]})]})}),n.jsx(oe,{open:S,onClose:w,children:n.jsxs(le,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 shadow rounded w-96 bg-white",children:[n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"icon !text-3xl text-green-600",children:"assignment_turned_in"}),n.jsx("span",{className:"font-semibold",children:"Bạn có chắc chắn muốn nộp bài ? "})]}),n.jsxs("p",{className:"py-3 text-sm",children:["Thời gian làm bài còn lại của bạn còn : ",n.jsx("span",{className:"font-semibold",children:Q(b)})]}),t>0?n.jsxs("p",{className:"pb-3 text-sm text-red-600",children:[n.jsx("span",{className:"font-semibold",children:"Cảnh báo"}),": Bạn còn ",n.jsx("span",{className:"font-semibold",children:t})," câu hỏi trắc nghiệm chưa trả lời. Bạn có chắc muốn kết thúc bài thi?"]}):null,n.jsx("p",{className:"text-gray-600 text-sm",children:"Khi xác nhận nhấn nộp bài, bạn sẽ không thể sửa lại bài thi của mình. Hãy chắc chắn bạn đã xem lại tất cả các đáp án. Chúc bạn may mắn 🍀."})]}),n.jsxs("div",{className:"border-t p-4 flex justify-end space-x-4",children:[n.jsx(z,{color:"inherit",onClick:w,children:"Hủy"}),n.jsx(z,{variant:"contained",onClick:O,children:"Xác nhận"})]})]})})]})},bt=({question:i,index:e,answer:s,setAnswer:t})=>{const r=o=>{t({questionId:s.questionId,value:o})};return n.jsxs("div",{id:`question-${i.id}`,className:"w-full rounded-md bg-white shadow",children:[n.jsxs("div",{className:"p-4",children:[n.jsxs("span",{className:"font-semibold",children:["Câu ",e,". "]}),n.jsx("div",{className:"content mt-2",dangerouslySetInnerHTML:{__html:i.content}})]}),n.jsxs("div",{className:"flex flex-wrap -mx-2 p-4",children:[n.jsxs("div",{className:"w-1/2 sm:w-1/4 px-2 mb-4",children:[n.jsx("span",{className:"font-semibold",children:"A. "}),n.jsx("span",{className:"break-words",children:i.a})]}),n.jsxs("div",{className:"w-1/2 sm:w-1/4 px-2 mb-4",children:[n.jsx("span",{className:"font-semibold",children:"B. "}),n.jsx("span",{className:"break-words",children:i.b})]}),n.jsxs("div",{className:"w-1/2 sm:w-1/4 px-2 mb-4",children:[n.jsx("span",{className:"font-semibold",children:"C. "}),n.jsx("span",{className:"break-words",children:i.c})]}),n.jsxs("div",{className:"w-1/2 sm:w-1/4 px-2 mb-4",children:[n.jsx("span",{className:"font-semibold",children:"D. "}),n.jsx("span",{className:"break-words",children:i.d})]})]}),n.jsxs("div",{className:"px-4 py-1.5 bg-blue-600 rounded-b-md text-white flex items-center space-x-2",children:[n.jsx("span",{className:"font-semibold mr-2 text-sm",children:"Đáp án của bạn:"}),n.jsx("p",{className:`inline-flex w-8 h-8 rounded-full bg-white text-gray-800 hover:bg-blue-200 cursor-pointer items-center justify-center
          ${s.value=="a"?"!bg-orange-600 !text-white":""}
          `,onClick:()=>r("a"),children:n.jsx("span",{className:"font-semibold",children:"A"})}),n.jsx("p",{className:`inline-flex w-8 h-8 rounded-full bg-white text-gray-800 hover:bg-blue-200 cursor-pointer items-center justify-center
          ${s.value=="b"?"!bg-orange-600 !text-white":""}
          `,onClick:()=>r("b"),children:n.jsx("span",{className:"font-semibold",children:"B"})}),n.jsx("p",{className:`inline-flex w-8 h-8 rounded-full bg-white text-gray-800 hover:bg-blue-200 cursor-pointer items-center justify-center
          ${s.value=="c"?"!bg-orange-600 !text-white":""}
          `,onClick:()=>r("c"),children:n.jsx("span",{className:"font-semibold",children:"C"})}),n.jsx("p",{className:`inline-flex w-8 h-8 rounded-full bg-white text-gray-800 hover:bg-blue-200 cursor-pointer items-center justify-center
          ${s.value=="d"?"!bg-orange-600 !text-white":""}
          `,onClick:()=>r("d"),children:n.jsx("span",{className:"font-semibold",children:"D"})})]})]})};var gt=!!(typeof window<"u"&&window.document&&window.document.createElement),xt=gt;const re=Ke(xt);var yt=typeof global=="object"&&global&&global.Object===Object&&global;const wt=yt;var Et=typeof self=="object"&&self&&self.Object===Object&&self,St=wt||Et||Function("return this")();const Oe=St;var Ot=Oe.Symbol;const F=Ot;var _e=Object.prototype,_t=_e.hasOwnProperty,Nt=_e.toString,B=F?F.toStringTag:void 0;function jt(i){var e=_t.call(i,B),s=i[B];try{i[B]=void 0;var t=!0}catch{}var r=Nt.call(i);return t&&(e?i[B]=s:delete i[B]),r}var kt=Object.prototype,At=kt.toString;function Ct(i){return At.call(i)}var Mt="[object Null]",Wt="[object Undefined]",ue=F?F.toStringTag:void 0;function Tt(i){return i==null?i===void 0?Wt:Mt:ue&&ue in Object(i)?jt(i):Ct(i)}function zt(i){return i!=null&&typeof i=="object"}var Rt="[object Symbol]";function Lt(i){return typeof i=="symbol"||zt(i)&&Tt(i)==Rt}var Dt=/\s/;function Pt(i){for(var e=i.length;e--&&Dt.test(i.charAt(e)););return e}var Bt=/^\s+/;function It(i){return i&&i.slice(0,Pt(i)+1).replace(Bt,"")}function q(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var fe=0/0,$t=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Vt=/^0o[0-7]+$/i,Ft=parseInt;function pe(i){if(typeof i=="number")return i;if(Lt(i))return fe;if(q(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=q(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=It(i);var s=Ht.test(i);return s||Vt.test(i)?Ft(i.slice(2),s?2:8):$t.test(i)?fe:+i}var qt=function(){return Oe.Date.now()};const K=qt;var Xt="Expected a function",Yt=Math.max,Gt=Math.min;function I(i,e,s){var t,r,o,l,a,c,h=0,u=!1,f=!1,g=!0;if(typeof i!="function")throw new TypeError(Xt);e=pe(e)||0,q(s)&&(u=!!s.leading,f="maxWait"in s,o=f?Yt(pe(s.maxWait)||0,e):o,g="trailing"in s?!!s.trailing:g);function p(d){var _=t,j=r;return t=r=void 0,h=d,l=i.apply(j,_),l}function S(d){return h=d,a=setTimeout(E,e),u?p(d):l}function x(d){var _=d-c,j=d-h,ne=e-_;return f?Gt(ne,o-j):ne}function w(d){var _=d-c,j=d-h;return c===void 0||_>=e||_<0||f&&j>=o}function E(){var d=K();if(w(d))return O(d);a=setTimeout(E,x(d))}function O(d){return a=void 0,g&&t?p(d):(t=r=void 0,l)}function m(){a!==void 0&&clearTimeout(a),h=0,t=c=r=a=void 0}function b(){return a===void 0?l:O(K())}function v(){var d=K(),_=w(d);if(t=arguments,r=this,c=d,_){if(a===void 0)return S(c);if(f)return clearTimeout(a),a=setTimeout(E,e),p(c)}return a===void 0&&(a=setTimeout(E,e)),l}return v.cancel=m,v.flush=b,v}var Ut="Expected a function";function Qt(i,e,s){var t=!0,r=!0;if(typeof i!="function")throw new TypeError(Ut);return q(s)&&(t="leading"in s?!!s.leading:t,r="trailing"in s?!!s.trailing:r),I(i,e,{leading:t,maxWait:e,trailing:r})}var L=function(){return L=Object.assign||function(e){for(var s,t=1,r=arguments.length;t<r;t++){s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},L.apply(this,arguments)},R=null,me=null;re&&window.addEventListener("resize",function(){me!==window.devicePixelRatio&&(me=window.devicePixelRatio,R=null)});function ve(){if(R===null){if(typeof document>"u")return R=0,R;var i=document.body,e=document.createElement("div");e.classList.add("simplebar-hide-scrollbar"),i.appendChild(e);var s=e.getBoundingClientRect().right;i.removeChild(e),R=s}return R}function Ne(i){return!i||!i.ownerDocument||!i.ownerDocument.defaultView?window:i.ownerDocument.defaultView}function je(i){return!i||!i.ownerDocument?document:i.ownerDocument}var ke=function(i){var e={},s=Array.prototype.reduce.call(i,function(t,r){var o=r.name.match(/data-simplebar-(.+)/);if(o){var l=o[1].replace(/\W+(.)/g,function(a,c){return c.toUpperCase()});switch(r.value){case"true":t[l]=!0;break;case"false":t[l]=!1;break;case void 0:t[l]=!0;break;default:t[l]=r.value}}return t},e);return s};function Ae(i,e){var s;i&&(s=i.classList).add.apply(s,e.split(" "))}function Ce(i,e){i&&e.split(" ").forEach(function(s){i.classList.remove(s)})}function Me(i){return".".concat(i.split(" ").join("."))}var Kt=Object.freeze({__proto__:null,getElementWindow:Ne,getElementDocument:je,getOptions:ke,addClasses:Ae,removeClasses:Ce,classNamesToQuery:Me}),M=Ne,Z=je,Zt=ke,W=Ae,T=Ce,N=Me,$=function(){function i(e,s){s===void 0&&(s={});var t=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var r=M(t.el);t.scrollXTicking||(r.requestAnimationFrame(t.scrollX),t.scrollXTicking=!0),t.scrollYTicking||(r.requestAnimationFrame(t.scrollY),t.scrollYTicking=!0),t.isScrolling||(t.isScrolling=!0,W(t.el,t.classNames.scrolling)),t.showScrollbar("x"),t.showScrollbar("y"),t.onStopScrolling()},this.scrollX=function(){t.axis.x.isOverflowing&&t.positionScrollbar("x"),t.scrollXTicking=!1},this.scrollY=function(){t.axis.y.isOverflowing&&t.positionScrollbar("y"),t.scrollYTicking=!1},this._onStopScrolling=function(){T(t.el,t.classNames.scrolling),t.options.autoHide&&(t.hideScrollbar("x"),t.hideScrollbar("y")),t.isScrolling=!1},this.onMouseEnter=function(){t.isMouseEntering||(W(t.el,t.classNames.mouseEntered),t.showScrollbar("x"),t.showScrollbar("y"),t.isMouseEntering=!0),t.onMouseEntered()},this._onMouseEntered=function(){T(t.el,t.classNames.mouseEntered),t.options.autoHide&&(t.hideScrollbar("x"),t.hideScrollbar("y")),t.isMouseEntering=!1},this._onMouseMove=function(r){t.mouseX=r.clientX,t.mouseY=r.clientY,(t.axis.x.isOverflowing||t.axis.x.forceVisible)&&t.onMouseMoveForAxis("x"),(t.axis.y.isOverflowing||t.axis.y.forceVisible)&&t.onMouseMoveForAxis("y")},this.onMouseLeave=function(){t.onMouseMove.cancel(),(t.axis.x.isOverflowing||t.axis.x.forceVisible)&&t.onMouseLeaveForAxis("x"),(t.axis.y.isOverflowing||t.axis.y.forceVisible)&&t.onMouseLeaveForAxis("y"),t.mouseX=-1,t.mouseY=-1},this._onWindowResize=function(){t.scrollbarWidth=t.getScrollbarWidth(),t.hideNativeScrollbar()},this.onPointerEvent=function(r){if(!(!t.axis.x.track.el||!t.axis.y.track.el||!t.axis.x.scrollbar.el||!t.axis.y.scrollbar.el)){var o,l;t.axis.x.track.rect=t.axis.x.track.el.getBoundingClientRect(),t.axis.y.track.rect=t.axis.y.track.el.getBoundingClientRect(),(t.axis.x.isOverflowing||t.axis.x.forceVisible)&&(o=t.isWithinBounds(t.axis.x.track.rect)),(t.axis.y.isOverflowing||t.axis.y.forceVisible)&&(l=t.isWithinBounds(t.axis.y.track.rect)),(o||l)&&(r.stopPropagation(),r.type==="pointerdown"&&r.pointerType!=="touch"&&(o&&(t.axis.x.scrollbar.rect=t.axis.x.scrollbar.el.getBoundingClientRect(),t.isWithinBounds(t.axis.x.scrollbar.rect)?t.onDragStart(r,"x"):t.onTrackClick(r,"x")),l&&(t.axis.y.scrollbar.rect=t.axis.y.scrollbar.el.getBoundingClientRect(),t.isWithinBounds(t.axis.y.scrollbar.rect)?t.onDragStart(r,"y"):t.onTrackClick(r,"y"))))}},this.drag=function(r){var o,l,a,c,h,u,f,g,p,S,x;if(!(!t.draggedAxis||!t.contentWrapperEl)){var w,E=t.axis[t.draggedAxis].track,O=(l=(o=E.rect)===null||o===void 0?void 0:o[t.axis[t.draggedAxis].sizeAttr])!==null&&l!==void 0?l:0,m=t.axis[t.draggedAxis].scrollbar,b=(c=(a=t.contentWrapperEl)===null||a===void 0?void 0:a[t.axis[t.draggedAxis].scrollSizeAttr])!==null&&c!==void 0?c:0,v=parseInt((u=(h=t.elStyles)===null||h===void 0?void 0:h[t.axis[t.draggedAxis].sizeAttr])!==null&&u!==void 0?u:"0px",10);r.preventDefault(),r.stopPropagation(),t.draggedAxis==="y"?w=r.pageY:w=r.pageX;var d=w-((g=(f=E.rect)===null||f===void 0?void 0:f[t.axis[t.draggedAxis].offsetAttr])!==null&&g!==void 0?g:0)-t.axis[t.draggedAxis].dragOffset;d=t.draggedAxis==="x"&&t.isRtl?((S=(p=E.rect)===null||p===void 0?void 0:p[t.axis[t.draggedAxis].sizeAttr])!==null&&S!==void 0?S:0)-m.size-d:d;var _=d/(O-m.size),j=_*(b-v);t.draggedAxis==="x"&&t.isRtl&&(j=!((x=i.getRtlHelpers())===null||x===void 0)&&x.isScrollingToNegative?-j:j),t.contentWrapperEl[t.axis[t.draggedAxis].scrollOffsetAttr]=j}},this.onEndDrag=function(r){var o=Z(t.el),l=M(t.el);r.preventDefault(),r.stopPropagation(),T(t.el,t.classNames.dragging),o.removeEventListener("mousemove",t.drag,!0),o.removeEventListener("mouseup",t.onEndDrag,!0),t.removePreventClickId=l.setTimeout(function(){o.removeEventListener("click",t.preventClick,!0),o.removeEventListener("dblclick",t.preventClick,!0),t.removePreventClickId=null})},this.preventClick=function(r){r.preventDefault(),r.stopPropagation()},this.el=e,this.options=L(L({},i.defaultOptions),s),this.classNames=L(L({},i.defaultOptions.classNames),s.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},typeof this.el!="object"||!this.el.nodeName)throw new Error("Argument passed to SimpleBar must be an HTML element instead of ".concat(this.el));this.onMouseMove=Qt(this._onMouseMove,64),this.onWindowResize=I(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=I(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=I(this._onMouseEntered,this.stopScrollDelay),this.init()}return i.getRtlHelpers=function(){if(i.rtlHelpers)return i.rtlHelpers;var e=document.createElement("div");e.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var s=e.firstElementChild,t=s==null?void 0:s.firstElementChild;if(!t)return null;document.body.appendChild(s),s.scrollLeft=0;var r=i.getOffset(s),o=i.getOffset(t);s.scrollLeft=-999;var l=i.getOffset(t);return document.body.removeChild(s),i.rtlHelpers={isScrollOriginAtZero:r.left!==o.left,isScrollingToNegative:o.left!==l.left},i.rtlHelpers},i.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display==="none"||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:ve()}catch{return ve()}},i.getOffset=function(e){var s=e.getBoundingClientRect(),t=Z(e),r=M(e);return{top:s.top+(r.pageYOffset||t.documentElement.scrollTop),left:s.left+(r.pageXOffset||t.documentElement.scrollLeft)}},i.prototype.init=function(){re&&(this.initDOM(),this.rtlHelpers=i.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},i.prototype.initDOM=function(){var e,s;this.wrapperEl=this.el.querySelector(N(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(N(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(N(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(N(this.classNames.offset)),this.maskEl=this.el.querySelector(N(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,N(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(N(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(N(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,"".concat(N(this.classNames.track)).concat(N(this.classNames.horizontal))),this.axis.y.track.el=this.findChild(this.el,"".concat(N(this.classNames.track)).concat(N(this.classNames.vertical))),this.axis.x.scrollbar.el=((e=this.axis.x.track.el)===null||e===void 0?void 0:e.querySelector(N(this.classNames.scrollbar)))||null,this.axis.y.scrollbar.el=((s=this.axis.y.track.el)===null||s===void 0?void 0:s.querySelector(N(this.classNames.scrollbar)))||null,this.options.autoHide||(W(this.axis.x.scrollbar.el,this.classNames.visible),W(this.axis.y.scrollbar.el,this.classNames.visible))},i.prototype.initListeners=function(){var e=this,s,t=M(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),(s=this.contentWrapperEl)===null||s===void 0||s.addEventListener("scroll",this.onScroll),t.addEventListener("resize",this.onWindowResize),!!this.contentEl){if(window.ResizeObserver){var r=!1,o=t.ResizeObserver||ResizeObserver;this.resizeObserver=new o(function(){r&&t.requestAnimationFrame(function(){e.recalculate()})}),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),t.requestAnimationFrame(function(){r=!0})}this.mutationObserver=new t.MutationObserver(function(){t.requestAnimationFrame(function(){e.recalculate()})}),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},i.prototype.recalculate=function(){if(!(!this.heightAutoObserverEl||!this.contentEl||!this.contentWrapperEl||!this.wrapperEl||!this.placeholderEl)){var e=M(this.el);this.elStyles=e.getComputedStyle(this.el),this.isRtl=this.elStyles.direction==="rtl";var s=this.contentEl.offsetWidth,t=this.heightAutoObserverEl.offsetHeight<=1,r=this.heightAutoObserverEl.offsetWidth<=1||s>0,o=this.contentWrapperEl.offsetWidth,l=this.elStyles.overflowX,a=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var c=this.contentEl.scrollHeight,h=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=t?"auto":"100%",this.placeholderEl.style.width=r?"".concat(s||h,"px"):"auto",this.placeholderEl.style.height="".concat(c,"px");var u=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=s!==0&&h>s,this.axis.y.isOverflowing=c>u,this.axis.x.isOverflowing=l==="hidden"?!1:this.axis.x.isOverflowing,this.axis.y.isOverflowing=a==="hidden"?!1:this.axis.y.isOverflowing,this.axis.x.forceVisible=this.options.forceVisible==="x"||this.options.forceVisible===!0,this.axis.y.forceVisible=this.options.forceVisible==="y"||this.options.forceVisible===!0,this.hideNativeScrollbar();var f=this.axis.x.isOverflowing?this.scrollbarWidth:0,g=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&h>o-g,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&c>u-f,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px")),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px")),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},i.prototype.getScrollbarSize=function(e){var s,t;if(e===void 0&&(e="y"),!this.axis[e].isOverflowing||!this.contentEl)return 0;var r=this.contentEl[this.axis[e].scrollSizeAttr],o=(t=(s=this.axis[e].track.el)===null||s===void 0?void 0:s[this.axis[e].offsetSizeAttr])!==null&&t!==void 0?t:0,l=o/r,a;return a=Math.max(~~(l*o),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(a=Math.min(a,this.options.scrollbarMaxSize)),a},i.prototype.positionScrollbar=function(e){var s,t,r;e===void 0&&(e="y");var o=this.axis[e].scrollbar;if(!(!this.axis[e].isOverflowing||!this.contentWrapperEl||!o.el||!this.elStyles)){var l=this.contentWrapperEl[this.axis[e].scrollSizeAttr],a=((s=this.axis[e].track.el)===null||s===void 0?void 0:s[this.axis[e].offsetSizeAttr])||0,c=parseInt(this.elStyles[this.axis[e].sizeAttr],10),h=this.contentWrapperEl[this.axis[e].scrollOffsetAttr];h=e==="x"&&this.isRtl&&(!((t=i.getRtlHelpers())===null||t===void 0)&&t.isScrollOriginAtZero)?-h:h,e==="x"&&this.isRtl&&(h=!((r=i.getRtlHelpers())===null||r===void 0)&&r.isScrollingToNegative?h:-h);var u=h/(l-c),f=~~((a-o.size)*u);f=e==="x"&&this.isRtl?-f+(a-o.size):f,o.el.style.transform=e==="x"?"translate3d(".concat(f,"px, 0, 0)"):"translate3d(0, ".concat(f,"px, 0)")}},i.prototype.toggleTrackVisibility=function(e){e===void 0&&(e="y");var s=this.axis[e].track.el,t=this.axis[e].scrollbar.el;!s||!t||!this.contentWrapperEl||(this.axis[e].isOverflowing||this.axis[e].forceVisible?(s.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(e))):(s.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(e))),this.axis[e].isOverflowing?t.style.display="block":t.style.display="none")},i.prototype.showScrollbar=function(e){e===void 0&&(e="y"),this.axis[e].isOverflowing&&!this.axis[e].scrollbar.isVisible&&(W(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!0)},i.prototype.hideScrollbar=function(e){e===void 0&&(e="y"),this.axis[e].isOverflowing&&this.axis[e].scrollbar.isVisible&&(T(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!1)},i.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px",this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px")},i.prototype.onMouseMoveForAxis=function(e){e===void 0&&(e="y");var s=this.axis[e];!s.track.el||!s.scrollbar.el||(s.track.rect=s.track.el.getBoundingClientRect(),s.scrollbar.rect=s.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(s.track.rect)?(this.showScrollbar(e),W(s.track.el,this.classNames.hover),this.isWithinBounds(s.scrollbar.rect)?W(s.scrollbar.el,this.classNames.hover):T(s.scrollbar.el,this.classNames.hover)):(T(s.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)))},i.prototype.onMouseLeaveForAxis=function(e){e===void 0&&(e="y"),T(this.axis[e].track.el,this.classNames.hover),T(this.axis[e].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)},i.prototype.onDragStart=function(e,s){var t;s===void 0&&(s="y");var r=Z(this.el),o=M(this.el),l=this.axis[s].scrollbar,a=s==="y"?e.pageY:e.pageX;this.axis[s].dragOffset=a-(((t=l.rect)===null||t===void 0?void 0:t[this.axis[s].offsetAttr])||0),this.draggedAxis=s,W(this.el,this.classNames.dragging),r.addEventListener("mousemove",this.drag,!0),r.addEventListener("mouseup",this.onEndDrag,!0),this.removePreventClickId===null?(r.addEventListener("click",this.preventClick,!0),r.addEventListener("dblclick",this.preventClick,!0)):(o.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},i.prototype.onTrackClick=function(e,s){var t=this,r,o,l,a;s===void 0&&(s="y");var c=this.axis[s];if(!(!this.options.clickOnTrack||!c.scrollbar.el||!this.contentWrapperEl)){e.preventDefault();var h=M(this.el);this.axis[s].scrollbar.rect=c.scrollbar.el.getBoundingClientRect();var u=this.axis[s].scrollbar,f=(o=(r=u.rect)===null||r===void 0?void 0:r[this.axis[s].offsetAttr])!==null&&o!==void 0?o:0,g=parseInt((a=(l=this.elStyles)===null||l===void 0?void 0:l[this.axis[s].sizeAttr])!==null&&a!==void 0?a:"0px",10),p=this.contentWrapperEl[this.axis[s].scrollOffsetAttr],S=s==="y"?this.mouseY-f:this.mouseX-f,x=S<0?-1:1,w=x===-1?p-g:p+g,E=40,O=function(){t.contentWrapperEl&&(x===-1?p>w&&(p-=E,t.contentWrapperEl[t.axis[s].scrollOffsetAttr]=p,h.requestAnimationFrame(O)):p<w&&(p+=E,t.contentWrapperEl[t.axis[s].scrollOffsetAttr]=p,h.requestAnimationFrame(O)))};O()}},i.prototype.getContentElement=function(){return this.contentEl},i.prototype.getScrollElement=function(){return this.contentWrapperEl},i.prototype.removeListeners=function(){var e=M(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},i.prototype.unMount=function(){this.removeListeners()},i.prototype.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},i.prototype.findChild=function(e,s){var t=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,function(r){return t.call(r,s)})[0]},i.rtlHelpers=null,i.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:"scrollable content",classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},scrollableNode:null,contentNode:null,autoHide:!0},i.getOptions=Zt,i.helpers=Kt,i}(),ee=function(i,e){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,t){s.__proto__=t}||function(s,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])},ee(i,e)};function Jt(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ee(i,e);function s(){this.constructor=i}i.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}var We=$.helpers,J=We.getOptions,k=We.addClasses,te=function(i){Jt(e,i);function e(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var r=i.apply(this,s)||this;return e.instances.set(s[0],r),r}return e.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll("[data-simplebar]"),function(s){s.getAttribute("data-simplebar")!=="init"&&!e.instances.has(s)&&new e(s,J(s.attributes))})},e.removeObserver=function(){var s;(s=e.globalObserver)===null||s===void 0||s.disconnect()},e.prototype.initDOM=function(){var s=this,t,r,o;if(!Array.prototype.filter.call(this.el.children,function(c){return c.classList.contains(s.classNames.wrapper)}).length){for(this.wrapperEl=document.createElement("div"),this.contentWrapperEl=document.createElement("div"),this.offsetEl=document.createElement("div"),this.maskEl=document.createElement("div"),this.contentEl=document.createElement("div"),this.placeholderEl=document.createElement("div"),this.heightAutoObserverWrapperEl=document.createElement("div"),this.heightAutoObserverEl=document.createElement("div"),k(this.wrapperEl,this.classNames.wrapper),k(this.contentWrapperEl,this.classNames.contentWrapper),k(this.offsetEl,this.classNames.offset),k(this.maskEl,this.classNames.mask),k(this.contentEl,this.classNames.contentEl),k(this.placeholderEl,this.classNames.placeholder),k(this.heightAutoObserverWrapperEl,this.classNames.heightAutoObserverWrapperEl),k(this.heightAutoObserverEl,this.classNames.heightAutoObserverEl);this.el.firstChild;)this.contentEl.appendChild(this.el.firstChild);this.contentWrapperEl.appendChild(this.contentEl),this.offsetEl.appendChild(this.contentWrapperEl),this.maskEl.appendChild(this.offsetEl),this.heightAutoObserverWrapperEl.appendChild(this.heightAutoObserverEl),this.wrapperEl.appendChild(this.heightAutoObserverWrapperEl),this.wrapperEl.appendChild(this.maskEl),this.wrapperEl.appendChild(this.placeholderEl),this.el.appendChild(this.wrapperEl),(t=this.contentWrapperEl)===null||t===void 0||t.setAttribute("tabindex","0"),(r=this.contentWrapperEl)===null||r===void 0||r.setAttribute("role","region"),(o=this.contentWrapperEl)===null||o===void 0||o.setAttribute("aria-label",this.options.ariaLabel)}if(!this.axis.x.track.el||!this.axis.y.track.el){var l=document.createElement("div"),a=document.createElement("div");k(l,this.classNames.track),k(a,this.classNames.scrollbar),l.appendChild(a),this.axis.x.track.el=l.cloneNode(!0),k(this.axis.x.track.el,this.classNames.horizontal),this.axis.y.track.el=l.cloneNode(!0),k(this.axis.y.track.el,this.classNames.vertical),this.el.appendChild(this.axis.x.track.el),this.el.appendChild(this.axis.y.track.el)}$.prototype.initDOM.call(this),this.el.setAttribute("data-simplebar","init")},e.prototype.unMount=function(){$.prototype.unMount.call(this),e.instances.delete(this.el)},e.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),typeof MutationObserver<"u"&&(this.globalObserver=new MutationObserver(e.handleMutations),this.globalObserver.observe(document,{childList:!0,subtree:!0})),document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},e.handleMutations=function(s){s.forEach(function(t){t.addedNodes.forEach(function(r){r.nodeType===1&&(r.hasAttribute("data-simplebar")?!e.instances.has(r)&&document.documentElement.contains(r)&&new e(r,J(r.attributes)):r.querySelectorAll("[data-simplebar]").forEach(function(o){o.getAttribute("data-simplebar")!=="init"&&!e.instances.has(o)&&document.documentElement.contains(o)&&new e(o,J(o.attributes))}))}),t.removedNodes.forEach(function(r){r.nodeType===1&&(r.getAttribute("data-simplebar")==="init"?e.instances.has(r)&&!document.documentElement.contains(r)&&e.instances.get(r).unMount():Array.prototype.forEach.call(r.querySelectorAll('[data-simplebar="init"]'),function(o){e.instances.has(o)&&!document.documentElement.contains(o)&&e.instances.get(o).unMount()}))})})},e.instances=new WeakMap,e}($);re&&te.initHtmlApi();var Te=function(){if(typeof Map<"u")return Map;function i(e,s){var t=-1;return e.some(function(r,o){return r[0]===s?(t=o,!0):!1}),t}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(s){var t=i(this.__entries__,s),r=this.__entries__[t];return r&&r[1]},e.prototype.set=function(s,t){var r=i(this.__entries__,s);~r?this.__entries__[r][1]=t:this.__entries__.push([s,t])},e.prototype.delete=function(s){var t=this.__entries__,r=i(t,s);~r&&t.splice(r,1)},e.prototype.has=function(s){return!!~i(this.__entries__,s)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(s,t){t===void 0&&(t=null);for(var r=0,o=this.__entries__;r<o.length;r++){var l=o[r];s.call(t,l[1],l[0])}},e}()}(),ie=typeof window<"u"&&typeof document<"u"&&window.document===document,X=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),ei=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(X):function(i){return setTimeout(function(){return i(Date.now())},1e3/60)}}(),ti=2;function ii(i,e){var s=!1,t=!1,r=0;function o(){s&&(s=!1,i()),t&&a()}function l(){ei(o)}function a(){var c=Date.now();if(s){if(c-r<ti)return;t=!0}else s=!0,t=!1,setTimeout(l,e);r=c}return a}var si=20,ri=["top","right","bottom","left","width","height","size","weight"],ni=typeof MutationObserver<"u",oi=function(){function i(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=ii(this.refresh.bind(this),si)}return i.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},i.prototype.removeObserver=function(e){var s=this.observers_,t=s.indexOf(e);~t&&s.splice(t,1),!s.length&&this.connected_&&this.disconnect_()},i.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},i.prototype.updateObservers_=function(){var e=this.observers_.filter(function(s){return s.gatherActive(),s.hasActive()});return e.forEach(function(s){return s.broadcastActive()}),e.length>0},i.prototype.connect_=function(){!ie||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ni?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},i.prototype.disconnect_=function(){!ie||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},i.prototype.onTransitionEnd_=function(e){var s=e.propertyName,t=s===void 0?"":s,r=ri.some(function(o){return!!~t.indexOf(o)});r&&this.refresh()},i.getInstance=function(){return this.instance_||(this.instance_=new i),this.instance_},i.instance_=null,i}(),ze=function(i,e){for(var s=0,t=Object.keys(e);s<t.length;s++){var r=t[s];Object.defineProperty(i,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return i},P=function(i){var e=i&&i.ownerDocument&&i.ownerDocument.defaultView;return e||X},Re=U(0,0,0,0);function Y(i){return parseFloat(i)||0}function be(i){for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];return e.reduce(function(t,r){var o=i["border-"+r+"-width"];return t+Y(o)},0)}function li(i){for(var e=["top","right","bottom","left"],s={},t=0,r=e;t<r.length;t++){var o=r[t],l=i["padding-"+o];s[o]=Y(l)}return s}function ai(i){var e=i.getBBox();return U(0,0,e.width,e.height)}function ci(i){var e=i.clientWidth,s=i.clientHeight;if(!e&&!s)return Re;var t=P(i).getComputedStyle(i),r=li(t),o=r.left+r.right,l=r.top+r.bottom,a=Y(t.width),c=Y(t.height);if(t.boxSizing==="border-box"&&(Math.round(a+o)!==e&&(a-=be(t,"left","right")+o),Math.round(c+l)!==s&&(c-=be(t,"top","bottom")+l)),!di(i)){var h=Math.round(a+o)-e,u=Math.round(c+l)-s;Math.abs(h)!==1&&(a-=h),Math.abs(u)!==1&&(c-=u)}return U(r.left,r.top,a,c)}var hi=function(){return typeof SVGGraphicsElement<"u"?function(i){return i instanceof P(i).SVGGraphicsElement}:function(i){return i instanceof P(i).SVGElement&&typeof i.getBBox=="function"}}();function di(i){return i===P(i).document.documentElement}function ui(i){return ie?hi(i)?ai(i):ci(i):Re}function fi(i){var e=i.x,s=i.y,t=i.width,r=i.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,l=Object.create(o.prototype);return ze(l,{x:e,y:s,width:t,height:r,top:s,right:e+t,bottom:r+s,left:e}),l}function U(i,e,s,t){return{x:i,y:e,width:s,height:t}}var pi=function(){function i(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=U(0,0,0,0),this.target=e}return i.prototype.isActive=function(){var e=ui(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},i.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},i}(),mi=function(){function i(e,s){var t=fi(s);ze(this,{target:e,contentRect:t})}return i}(),vi=function(){function i(e,s,t){if(this.activeObservations_=[],this.observations_=new Te,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=s,this.callbackCtx_=t}return i.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof P(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var s=this.observations_;s.has(e)||(s.set(e,new pi(e)),this.controller_.addObserver(this),this.controller_.refresh())}},i.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof P(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var s=this.observations_;s.has(e)&&(s.delete(e),s.size||this.controller_.removeObserver(this))}},i.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},i.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(s){s.isActive()&&e.activeObservations_.push(s)})},i.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,s=this.activeObservations_.map(function(t){return new mi(t.target,t.broadcastRect())});this.callback_.call(e,s,e),this.clearActive()}},i.prototype.clearActive=function(){this.activeObservations_.splice(0)},i.prototype.hasActive=function(){return this.activeObservations_.length>0},i}(),Le=typeof WeakMap<"u"?new WeakMap:new Te,De=function(){function i(e){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var s=oi.getInstance(),t=new vi(e,s,this);Le.set(this,t)}return i}();["observe","unobserve","disconnect"].forEach(function(i){De.prototype[i]=function(){var e;return(e=Le.get(this))[i].apply(e,arguments)}});var bi=function(){return typeof X.ResizeObserver<"u"?X.ResizeObserver:De}();const gi=y.forwardRef((i,e)=>{const{className:s,children:t,onScroll:r,...o}=i,l=y.useRef(null),a=y.useRef();return y.useEffect(()=>{var c;if(l.current)return"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.ResizeObserver=bi,a.current=new te(l.current),(c=a.current.getScrollElement())==null||c.addEventListener("scroll",r),e&&(typeof e=="function"?e(a.current):e.current=a.current),()=>{te.removeObserver()}},[]),n.jsx("div",{ref:l,...o,className:Ee("relative overflow-y-auto overflow-x-hidden",s),children:t})}),xi=()=>n.jsxs("div",{className:"w-full h-full bg-slate-100 flex flex-col overflow-hidden",children:[n.jsxs("div",{className:"h-14 border-b flex space-x-4 items-center justify-between p-4",children:[n.jsx(A,{variant:"rounded",width:100,height:30}),n.jsx(A,{variant:"rounded",width:200,height:25}),n.jsx(A,{variant:"rounded",width:100,height:30})]}),n.jsxs("div",{className:"flex px-4 py-8 space-x-4 items-start mt-2",children:[n.jsx("div",{className:"flex-grow min-w-0 flex flex-col space-y-6",children:new Array(6).fill(0).map((i,e)=>n.jsxs("div",{className:"w-full rounded-md bg-white shadow",children:[n.jsx("div",{className:"p-4",children:n.jsx(A,{variant:"rounded",width:500,height:20})}),n.jsxs("div",{className:"flex flex-wrap -mx-2 p-4",children:[n.jsx("div",{className:"w-1/2 sm:w-1/4 px-2 mb-4",children:n.jsx(A,{variant:"rounded",width:100,height:30})}),n.jsx("div",{className:"w-1/2 sm:w-1/4 px-2 mb-4",children:n.jsx(A,{variant:"rounded",width:100,height:30})}),n.jsx("div",{className:"w-1/2 sm:w-1/4 px-2 mb-4",children:n.jsx(A,{variant:"rounded",width:100,height:30})}),n.jsx("div",{className:"w-1/2 sm:w-1/4 px-2 mb-4",children:n.jsx(A,{variant:"rounded",width:100,height:30})})]}),n.jsx("div",{className:"rounded-b-md",children:n.jsx(A,{variant:"rectangular",width:"100%",height:40})})]},e))}),n.jsxs("div",{className:"sticky top-[96px] w-96 p-4 rounded bg-white",children:[n.jsx(A,{variant:"rounded",width:200,height:20}),n.jsx("div",{className:"mt-2 grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(60px, 1fr))"},children:new Array(30).fill(0).map((i,e)=>n.jsx(A,{variant:"rounded",width:"100%",height:40},e))})]})]})]}),ji=()=>{const[i,e]=y.useState(null),[s,t]=y.useState([]),[r,o]=y.useState(!1),l=y.useRef(null),a=m=>{var v;const b=((v=m.target)==null?void 0:v.scrollTop)||0;o(b>=40)},c=(m,b)=>{var j;m.preventDefault();var v=document.getElementById(`question-${b}`),d=76;if(v&&l.current){var _=v.offsetTop-d;(j=l.current.getScrollElement())==null||j.scrollTo({top:_,behavior:"smooth"})}},[h,u]=y.useState(!1),[f,g]=y.useState(!0),{code:p}=Ze(),{findQuestion:S}=Se();y.useEffect(()=>{(async()=>{const{test:b,questions:v}=await S(p||"");e(b),t(v),w(v.map(d=>({questionId:d.id,value:null}))),g(!1)})()},[]);const[x,w]=y.useState([]),E=m=>{w(b=>b.map(v=>({...v,value:v.questionId==m.questionId?m.value:v.value})))},O=m=>x.find(b=>b.questionId==m);return n.jsxs(n.Fragment,{children:[f?n.jsx(xi,{}):i==null?n.jsx("p",{className:"text-center",children:"Không tìm thấy đề"}):n.jsx(gi,{ref:l,className:"relative w-full h-full bg-slate-100",onScroll:a,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx(vt,{className:`sticky top-0 z-10 ${r?"bg-white":""}`,test:i,answers:x,numberOfUnansweredQuestions:x.filter(m=>m.value==null).length,loadingSubmit:h,setLoadingSubmit:u}),n.jsxs("div",{className:"flex px-4 py-8 space-x-4 items-start mt-2",children:[n.jsx(yi,{questions:s,findAnswer:O,handelSetAnswer:E}),n.jsxs(V.div,{className:"hidden md:block sticky top-[96px] w-96 p-4 rounded bg-white",initial:{y:50,opacity:.5},animate:{y:0,opacity:1},transition:{duration:1},children:[n.jsx("p",{className:"font-semibold",children:"Danh sách các câu hỏi"}),n.jsx("div",{className:"mt-2 grid gap-2",style:{gridTemplateColumns:"repeat(auto-fill, minmax(60px, 1fr))"},children:s.map((m,b)=>{var v;return n.jsx("div",{onClick:d=>c(d,m.id),className:`p-1 rounded border border-gray-400 text-center cursor-pointer hover:!bg-blue-600 hover:!text-white hover:!border-blue-600 ${(v=O(m.id))!=null&&v.value?"!bg-orange-600 !text-white !border-orange-600":""}`,children:b+1},b)})})]})]})]})}),n.jsx(Je,{sx:{color:"#fff",zIndex:m=>m.zIndex.drawer+1},open:h,children:n.jsx(mt,{color:"inherit"})})]})},yi=({questions:i,findAnswer:e,handelSetAnswer:s})=>(y.useEffect(()=>{tt.highlightAll()},[]),n.jsx(V.div,{className:"flex-grow min-w-0 flex flex-col space-y-6",initial:{x:-50,opacity:.5},animate:{x:0,opacity:1},transition:{duration:1},children:i.map((t,r)=>{const o=e(t.id);if(o)return n.jsx(bt,{question:t,answer:o,setAnswer:s,index:r+1},r)})}));export{ji as default};
