import{r as t,S as w,U as S,V as T,W as B,X as L,j as s,F as U,Y as $,a as O,G as A}from"./main-ea3bcec7.js";import{u as K}from"./modal-a5743ae9.js";import{I as G}from"./IconButton-6b9ba51e.js";import{B as R}from"./Button-dbb12d56.js";import{T as V}from"./TextField-09a07e57.js";function M(){const n=t.useRef(!1);return w(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function W(){const n=M(),[c,e]=t.useState(0),r=t.useCallback(()=>{n.current&&e(c+1)},[c]);return[t.useCallback(()=>S.postRender(r),[r]),c]}class D extends t.Component{getSnapshotBeforeUpdate(c){const e=this.props.childRef.current;if(e&&c.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=e.offsetHeight||0,r.width=e.offsetWidth||0,r.top=e.offsetTop,r.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function H({children:n,isPresent:c}){const e=t.useId(),r=t.useRef(null),p=t.useRef({width:0,height:0,top:0,left:0});return t.useInsertionEffect(()=>{const{width:f,height:m,top:u,left:x}=p.current;if(c||!r.current||!f||!m)return;r.current.dataset.motionPopId=e;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${m}px !important;
            top: ${u}px !important;
            left: ${x}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[c]),t.createElement(D,{isPresent:c,childRef:r,sizeRef:p},t.cloneElement(n,{ref:r}))}const E=({children:n,initial:c,isPresent:e,onExitComplete:r,custom:p,presenceAffectsLayout:f,mode:m})=>{const u=T(J),x=t.useId(),d=t.useMemo(()=>({id:x,initial:c,isPresent:e,custom:p,onExitComplete:a=>{u.set(a,!0);for(const l of u.values())if(!l)return;r&&r()},register:a=>(u.set(a,!1),()=>u.delete(a))}),f?void 0:[e]);return t.useMemo(()=>{u.forEach((a,l)=>u.set(l,!1))},[e]),t.useEffect(()=>{!e&&!u.size&&r&&r()},[e]),m==="popLayout"&&(n=t.createElement(H,{isPresent:e},n)),t.createElement(B.Provider,{value:d},n)};function J(){return new Map}function X(n){return t.useEffect(()=>()=>n(),[])}const h=n=>n.key||"";function Y(n,c){n.forEach(e=>{const r=h(e);c.set(r,e)})}function _(n){const c=[];return t.Children.forEach(n,e=>{t.isValidElement(e)&&c.push(e)}),c}const q=({children:n,custom:c,initial:e=!0,onExitComplete:r,exitBeforeEnter:p,presenceAffectsLayout:f=!0,mode:m="sync"})=>{const u=t.useContext(L).forceRender||W()[0],x=M(),d=_(n);let a=d;const l=t.useRef(new Map).current,g=t.useRef(a),j=t.useRef(new Map).current,N=t.useRef(!0);if(w(()=>{N.current=!1,Y(d,j),g.current=a}),X(()=>{N.current=!0,j.clear(),l.clear()}),N.current)return t.createElement(t.Fragment,null,a.map(o=>t.createElement(E,{key:h(o),isPresent:!0,initial:e?void 0:!1,presenceAffectsLayout:f,mode:m},o)));a=[...a];const y=g.current.map(h),b=d.map(h),k=y.length;for(let o=0;o<k;o++){const i=y[o];b.indexOf(i)===-1&&!l.has(i)&&l.set(i,void 0)}return m==="wait"&&l.size&&(a=[]),l.forEach((o,i)=>{if(b.indexOf(i)!==-1)return;const v=j.get(i);if(!v)return;const I=y.indexOf(i);let C=o;if(!C){const z=()=>{j.delete(i),l.delete(i);const F=g.current.findIndex(P=>P.key===i);if(g.current.splice(F,1),!l.size){if(g.current=d,x.current===!1)return;u(),r&&r()}};C=t.createElement(E,{key:h(v),isPresent:!1,onExitComplete:z,custom:c,presenceAffectsLayout:f,mode:m},v),l.set(i,C)}a.splice(I,0,C)}),a=a.map(o=>{const i=o.key;return l.has(i)?o:t.createElement(E,{key:h(o),isPresent:!0,presenceAffectsLayout:f,mode:m},o)}),t.createElement(t.Fragment,null,l.size?a:a.map(o=>t.cloneElement(o)))},Q=n=>{const{className:c,user:e,...r}=n;return s.jsx("div",{...r,className:U("w-8 h-8 rounded-full bg-white",c),children:e!=null&&e.avatar?s.jsx("img",{src:$(e.avatar),alt:`photo ${e.name}`,className:"w-full h-full object-cover"}):s.jsx("span",{className:"w-full h-full icon icon-fill text-blue-600",children:"person"})})},re=()=>{const{isOpen:n,dispatch:c}=K(),{user:e,logout:r}=O();if(!e)return null;const[p,f]=t.useState(!1);return s.jsx(q,{children:n=="joinClass"&&s.jsxs(A.div,{className:"absolute w-full h-full top-0 left-0 bg-white z-50",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1},children:[s.jsxs("div",{className:"h-16 px-4 border-b flex items-center space-x-4",children:[s.jsx(G,{onClick:()=>c({isOpen:null}),children:s.jsx("span",{className:"icon",children:"close"})}),s.jsx("p",{className:"text-xl",children:"Tham gia lớp học"}),s.jsx("div",{className:"!ml-auto"}),s.jsx(R,{variant:"contained",disabled:!p,children:"Tham gia"})]}),s.jsxs("div",{className:"w-full max-w-xl mx-auto mt-6 flex flex-col space-y-6",children:[s.jsxs("div",{className:"p-6 rounded-lg border",children:[s.jsx("p",{className:"text-gray-600",children:"Bạn đang đăng nhập bằng tài khoản"}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4",children:[s.jsx(Q,{className:"w-12 h-12",user:e}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-semibold",children:e.name}),s.jsx("p",{className:"text-gray-600",children:e.email})]}),s.jsx(R,{className:"!ml-auto self-end",variant:"outlined",color:"error",onClick:()=>r(),children:"Đăng xuất"})]})]}),s.jsxs("div",{className:"p-6 rounded-lg border",children:[s.jsx("p",{className:"font-semibold text-xl",children:"Mã lớp"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Đề nghị giáo viên của bạn cung cấp mã lớp rồi nhập mã đó vào đây."}),s.jsx(V,{label:"Mã lớp",className:"mt-6 w-72"})]}),s.jsxs("div",{className:"px-4",children:[s.jsx("p",{className:"font-semibold",children:"Cách đăng nhập bằng mã lớp học"}),s.jsxs("ul",{className:"list-disc px-4 mt-2",children:[s.jsx("li",{className:"py-2",children:"Sử dụng tài khoản được cấp phép"}),s.jsx("li",{className:"py-2",children:"Sử dụng mã lớp học gồm 5-7 chữ cái hoặc số, không có dấu cách hoặc ký hiệu"})]}),s.jsxs("p",{className:"mt-2 text-gray-600",children:["Nếu bạn đang gặp vấn đề khi tham gia lớp học, hãy chuyển đến bài viết trong ",s.jsx("a",{href:"#",className:"text-blue-600",children:"Trung tâm trợ giúp"})]})]})]})]})})};export{re as default};
